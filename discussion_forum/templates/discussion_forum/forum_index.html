{% extends 'layout.html' %}
{% load static %}

{% block content %}

<h1>Welcome to the Forum</h1>

<section class="categories">
    <h2>Categories</h2>
    <ul>
        {% for category in categories %}
            <li>
                <a href="{% url 'discussion_forum:category_topics' category_id=category.id %}">
                    {{ category.name }}
                </a>
                <ul>
                    {% for topic in category.topics.all %}
                        <li>
                            <a href="{% url 'discussion_forum:topic_detail' topic_title=topic.title %}">
                                {{ topic.title }}
                            </a>
                        </li>
                    {% empty %}
                        <li>No topics in this category.</li>
                    {% endfor %}
                </ul>
            </li>
        {% empty %}
            <li>No categories available.</li>
        {% endfor %}
    </ul>
</section>

<section class="latest-posts">
    <h2>Latest Posts</h2>
    <ul>
        {% for post in latest_posts %}
            <li>
                <p><strong>{{ post.author.username }}</strong> in <a href="{% url 'discussion_forum:topic_detail' topic_title=post.topic.title %}">{{ post.topic.title }}</a></p>
                <p>{{ post.content|truncatewords:20 }}</p>
                <p><small>Posted on: {{ post.created_at|date:"d M Y H:i" }}</small></p>
            </li>
        {% empty %}
            <li>No posts available.</li>
        {% endfor %}
    </ul>
</section>
{% endblock %}
